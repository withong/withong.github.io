+++
title = "[내일배움캠프] 과제 - 계산기 1"
date = "2025-02-26T22:00:00+09:00"
draft = "false"
topic = ["camp"]
tag = ["내일배움캠프", "TIL", "과제", "계산기"]
ShowToc = true
+++

## 요구사항
클래스 없이 기본적인 연산을 수행할 수 있는 계산기 만들기

- **양의 정수(0 포함)를 입력받기**
    - Scanner를 사용하여 양의 정수 2개(0 포함)를 전달 받을 수 있습니다.
    - 양의 정수는 각각 하나씩 전달 받습니다.
    - 양의 정수는 적합한 타입으로 선언한 변수에 저장합니다.

- **사칙연산 기호(➕,➖,✖️,➗)를 입력받기**
    - Scanner를 사용하여 사칙연산 기호를 전달 받을 수 있습니다.
    - 사칙연산 기호를 적합한 타입으로 선언한 변수에 저장합니다. (`charAt(0)`)

- **위에서 입력받은 양의 정수 2개와 사칙연산 기호를 사용하여 연산을 진행한 후 결과값을 출력하기**
    - 키워드 : `if` `switch`
    - 사칙연산 기호에 맞는 연산자를 사용하여 연산을 진행합니다.
    - 입력받은 연산 기호를 구분하기 위해 제어문을 사용합니다. (예를 들면 if, switch)
    - 연산 오류가 발생할 경우 해당 오류에 대한 내용을 정제하여 출력합니다.
        - ex) “나눗셈 연산에서 분모(두번째 정수)에 0이 입력될 수 없습니다.“

- **반복문을 사용하되, 반복의 종료를 알려주는 “exit” 문자열을 입력하기 전까지 무한으로 계산을 진행할 수 있도록 소스 코드를 수정하기**
    - 키워드 : 무한으로 반복, 수정하기 (처음부터 무한 반복하는 것이 아니라, 위 스텝별로 진행하며 수정)
    - 반복문을 사용합니다. (예를 들어, for, while…)

---

## 기능 구현

### `main()`
  
![](https://velog.velcdn.com/images/ezro/post/61f931cd-b324-4252-8fdb-dcf3c4bd7825/image.png)

- 프로그램 실행 & 반복문으로 지속적인 입력을 받는다.
- 0 이상의 정수 2개와 연산자를 입력받고, 연산을 수행한다.
- 연산 결과를 일관된 형식으로 출력한다.
- 종료 여부를 확인하고 `exit` 입력 시 프로그램을 종료한다.

<br>

### `getUserNumber()`

![](https://velog.velcdn.com/images/ezro/post/c517eaa0-3916-44ae-a2da-2623041d91d1/image.png)

- 사용자로부터 0 이상의 정수를 입력받는다.
- 입력 값 검증을 진행한다. (빈 값, 음수, int 범위 초과)
- 입력이 유효하지 않으면 오류 메시지를 출력하고 재입력을 요청한다.

<br>

### `getUserOperator()`

![](https://velog.velcdn.com/images/ezro/post/221f0ffe-f383-4cc8-ada7-0d98f0cfe714/image.png)

- 사용자로부터 연산자(`+`, `-`, `*`, `/`)를 입력받고 검증한다.
- 입력이 유효하지 않으면 오류 메시지를 출력하고 재입력을 요청한다.

<br>

### `calculate()`

![](https://velog.velcdn.com/images/ezro/post/3c1ff147-5cec-4537-9811-d400af9070bb/image.png)

- 입력된 연산자 값에 따라 switch 문을 사용하여 연산을 수행한다.
- `int` 오버플로우를 방지한다. `Math.~~~`
- 나눗셈에서 두 번째 숫자가 `0`이면 `handleError()`를 호출한다.
- 연산 결과를 반환한다. 예외 발생 시 `-9999`를 반환한다.

<br>

### `isEnd()`

![](https://velog.velcdn.com/images/ezro/post/88214d52-4de3-42dd-b2d4-e461a6ebe7a8/image.png)

- 프로그램 종료 여부를 확인한다.
- `exit` 입력 시 `true`를 반환한다. (종료)
- `enter` 시 `false`를 반환한다. (반복)
- 그 외의 값일 경우 정상적인 값이 들어올 때까지 반복한다.

<br>

### `handleError()`

![](https://velog.velcdn.com/images/ezro/post/8db4b842-f2c5-4fd2-8be0-b41e8c0a7105/image.png)

- 오류 메시지를 한 곳에서 관리한다. 
- 오류 발생 시 적절한 오류 메시지를 반환한다.

<br>

### `printResultMessage()`

![](https://velog.velcdn.com/images/ezro/post/55ee11bf-872d-4a75-967e-60fb3a5673aa/image.png)

- `DecimalFormat`을 활용하여 소수점이 존재하면 최대 8자리까지 반올림하여 표현하고, 소수점 이하가 0이면 정수 형태로 출력한다.
- 연산 결과를 일관된 형식으로 출력한다.
- 결과 값이 `-9999`이면 결과 값에 `Error`를 출력한다.
- 정상적인 연산이면 결과 값을 출력한다.

---

## 문제 및 해결

### `hasNextInt()` 빈 입력 처리

- **문제** 
  - 사용자로부터 숫자를 입력받을 때 **엔터만** 입력 시 다음 단계로 진행되지 않고 입력을 계속 기다리는 현상 발견.
  
- **분석** 
  - 초기에는 `hasNextInt()`를 사용하여 입력 값이 숫자인지 확인하고, 숫자일 때만 `nextInt()`로 변환하여 값을 변수에 담고 있었음.
  - 이때, 사용자가 엔터만 입력하면 `hasNextInt()`가 버퍼에서 정수를 찾을 수 없으므로 `false`를 반환하게 되어, 사용자가 숫자를 입력할 때까지 무한 대기 상태에 빠지게 되는 문제 확인.
  
- **해결 및 개선** 
  - 빈 값 처리와 입력 검증을 위해 입력 값을 `nextLine()`으로 받게 수정. 
  - 입력 값 확인을 먼저 진행하고 변수에 담았던 이전과 달리 미리 변수에 담은 후 값 검증을 진행.
  - 잘못된 입력에 대한 명확한 오류 메시지를 출력하도록 `HandleError()`에서 오류 메시지 관리.
  
- **결과** 
  - 사용자로부터 값을 입력받을 때 엔터만 입력 또는 0 이상의 정수가 아닌 값 입력 시 에러 메시지 출력과 함께 재입력 요청받음.



### `int` 범위 초과 입력

- **문제** 
  - 사용자로부터 입력받은 값이나 연산 수행 결과가 너무 큰 숫자일 때 오류가 발생하고 프로그램이 종료되는 현상 발견.  
  
- **분석** 
  - `int` 값을 초과하는 범위의 숫자일 때 발생하는 문제.
  
- **해결 및 개선** 
  - 입력 값 검증 과정에서 `int` 범위 내의 숫자인지 검증하는 과정 추가. 
  - 연산 수행 과정에서 `Math` 클래스를 활용해 오버플로우를 방지하기 위한 예외 처리 추가. 
  - 예외 발생 시 에러 메시지 출력 후 재입력 요청하도록 변경.
  
- **결과** 
  - 사용자의 입력 값이 `int` 범위를 초과하면 범위 내의 숫자를 입력할 때까지 오류 메시지와 함께 재입력 요청함. 
  - 연산 수행 결과가 `int` 범위를 초과하면 오류 메시지와 함께 연산 수행 오류를 출력함.
  



## 실행 예시

### 정상 실행 예시

![](https://velog.velcdn.com/images/ezro/post/128673b2-d5bb-449d-9f5f-bfdfae68fed1/image.gif)


### 오류 실행 예시

![](https://velog.velcdn.com/images/ezro/post/e467765c-766b-4884-854c-d217eecfda87/image.gif)
