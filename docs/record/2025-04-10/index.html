<!DOCTYPE html>
<html lang="ko" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>JWT (JSON Web Token) | withong</title>
<meta name="keywords" content="">
<meta name="description" content="

1. JWT란?
JWT (JSON Web Token) 은 사용자 인증에 사용되는 토큰 기반 인증 방식 중 하나로,
서버에 상태를 저장하지 않고도 인증 정보를 유지할 수 있는 구조다.


구조
헤더(header).페이로드(payload).서명(signature)


Base64로 인코딩되며, payload는 누구나 디코딩 가능하므로 민감 정보를 넣지 않는다.


서명(Signature) 으로 토큰의 위변조 여부를 서버가 확인할 수 있다.


주된 목적: 정보의 위변조 방지 (정보 보호 아님)



2. 설정 방법
Spring Boot &#43; JPA 프로젝트 기준
build.gradle
dependencies {
    implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;
    implementation &#39;org.springframework.boot:spring-boot-starter-validation&#39;
    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;
    implementation &#39;at.favre.lib:bcrypt:0.10.2&#39;
    compileOnly &#39;org.projectlombok:lombok&#39;
    runtimeOnly &#39;com.mysql:mysql-connector-j&#39;
    annotationProcessor &#39;org.projectlombok:lombok&#39;
    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;
    testRuntimeOnly &#39;org.junit.platform:junit-platform-launcher&#39;

    // JWT 관련 추가
    implementation &#39;io.jsonwebtoken:jjwt-api:0.11.2&#39;
    implementation &#39;io.jsonwebtoken:jjwt-impl:0.11.2&#39;
    implementation &#39;io.jsonwebtoken:jjwt-jackson:0.11.2&#39;
}

3. JWT 구조 및 인증 흐름
JWT 구조

  
      
          구성 요소
          설명
      
  
  
      
          Header
          알고리즘 정보 (예: HS256)
      
      
          Payload
          사용자 정보(예: username) 및 만료 시간 등
      
      
          Signature
          secret key를 기반으로 만든 서명, 위변조 방지용
      
  

JWT 인증 흐름

클라이언트가 로그인 요청 (POST /login)
서버가 사용자 인증 후 JWT 생성
클라이언트는 JWT를 응답으로 받고, 저장 (쿠키, 로컬 스토리지 등)
이후 요청마다 JWT를 Authorization 헤더에 담아 전송
서버는 JWT 유효성 검사 (서명, 만료 여부 확인)
인증 통과 시 사용자 정보 추출 후 요청 처리


4. 로그인 구현 예시
User 엔티티">
<meta name="author" content="">
<link rel="canonical" href="https://withong.github.io/record/2025-04-10/">
<link crossorigin="anonymous" href="https://withong.github.io/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://withong.github.io/icons/rec.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://withong.github.io/icons/rec.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://withong.github.io/icons/rec.png">
<link rel="apple-touch-icon" href="https://withong.github.io/icons/rec.png">
<link rel="mask-icon" href="https://withong.github.io/icons/rec.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="ko" href="https://withong.github.io/record/2025-04-10/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://withong.github.io/record/2025-04-10/">
  <meta property="og:site_name" content="withong">
  <meta property="og:title" content="JWT (JSON Web Token)">
  <meta property="og:description" content="1. JWT란? JWT (JSON Web Token) 은 사용자 인증에 사용되는 토큰 기반 인증 방식 중 하나로,
서버에 상태를 저장하지 않고도 인증 정보를 유지할 수 있는 구조다.
구조
헤더(header).페이로드(payload).서명(signature) Base64로 인코딩되며, payload는 누구나 디코딩 가능하므로 민감 정보를 넣지 않는다.
서명(Signature) 으로 토큰의 위변조 여부를 서버가 확인할 수 있다.
주된 목적: 정보의 위변조 방지 (정보 보호 아님)
2. 설정 방법 Spring Boot &#43; JPA 프로젝트 기준
build.gradle
dependencies { implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39; implementation &#39;org.springframework.boot:spring-boot-starter-validation&#39; implementation &#39;org.springframework.boot:spring-boot-starter-web&#39; implementation &#39;at.favre.lib:bcrypt:0.10.2&#39; compileOnly &#39;org.projectlombok:lombok&#39; runtimeOnly &#39;com.mysql:mysql-connector-j&#39; annotationProcessor &#39;org.projectlombok:lombok&#39; testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39; testRuntimeOnly &#39;org.junit.platform:junit-platform-launcher&#39; // JWT 관련 추가 implementation &#39;io.jsonwebtoken:jjwt-api:0.11.2&#39; implementation &#39;io.jsonwebtoken:jjwt-impl:0.11.2&#39; implementation &#39;io.jsonwebtoken:jjwt-jackson:0.11.2&#39; } 3. JWT 구조 및 인증 흐름 JWT 구조 구성 요소 설명 Header 알고리즘 정보 (예: HS256) Payload 사용자 정보(예: username) 및 만료 시간 등 Signature secret key를 기반으로 만든 서명, 위변조 방지용 JWT 인증 흐름 클라이언트가 로그인 요청 (POST /login) 서버가 사용자 인증 후 JWT 생성 클라이언트는 JWT를 응답으로 받고, 저장 (쿠키, 로컬 스토리지 등) 이후 요청마다 JWT를 Authorization 헤더에 담아 전송 서버는 JWT 유효성 검사 (서명, 만료 여부 확인) 인증 통과 시 사용자 정보 추출 후 요청 처리 4. 로그인 구현 예시 User 엔티티">
  <meta property="og:locale" content="ko">
  <meta property="og:type" content="article">
    <meta property="article:section" content="record">
    <meta property="article:published_time" content="2025-04-10T20:22:48+09:00">
    <meta property="article:modified_time" content="2025-04-10T20:22:48+09:00">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JWT (JSON Web Token)">
<meta name="twitter:description" content="

1. JWT란?
JWT (JSON Web Token) 은 사용자 인증에 사용되는 토큰 기반 인증 방식 중 하나로,
서버에 상태를 저장하지 않고도 인증 정보를 유지할 수 있는 구조다.


구조
헤더(header).페이로드(payload).서명(signature)


Base64로 인코딩되며, payload는 누구나 디코딩 가능하므로 민감 정보를 넣지 않는다.


서명(Signature) 으로 토큰의 위변조 여부를 서버가 확인할 수 있다.


주된 목적: 정보의 위변조 방지 (정보 보호 아님)



2. 설정 방법
Spring Boot &#43; JPA 프로젝트 기준
build.gradle
dependencies {
    implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;
    implementation &#39;org.springframework.boot:spring-boot-starter-validation&#39;
    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;
    implementation &#39;at.favre.lib:bcrypt:0.10.2&#39;
    compileOnly &#39;org.projectlombok:lombok&#39;
    runtimeOnly &#39;com.mysql:mysql-connector-j&#39;
    annotationProcessor &#39;org.projectlombok:lombok&#39;
    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;
    testRuntimeOnly &#39;org.junit.platform:junit-platform-launcher&#39;

    // JWT 관련 추가
    implementation &#39;io.jsonwebtoken:jjwt-api:0.11.2&#39;
    implementation &#39;io.jsonwebtoken:jjwt-impl:0.11.2&#39;
    implementation &#39;io.jsonwebtoken:jjwt-jackson:0.11.2&#39;
}

3. JWT 구조 및 인증 흐름
JWT 구조

  
      
          구성 요소
          설명
      
  
  
      
          Header
          알고리즘 정보 (예: HS256)
      
      
          Payload
          사용자 정보(예: username) 및 만료 시간 등
      
      
          Signature
          secret key를 기반으로 만든 서명, 위변조 방지용
      
  

JWT 인증 흐름

클라이언트가 로그인 요청 (POST /login)
서버가 사용자 인증 후 JWT 생성
클라이언트는 JWT를 응답으로 받고, 저장 (쿠키, 로컬 스토리지 등)
이후 요청마다 JWT를 Authorization 헤더에 담아 전송
서버는 JWT 유효성 검사 (서명, 만료 여부 확인)
인증 통과 시 사용자 정보 추출 후 요청 처리


4. 로그인 구현 예시
User 엔티티">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Study Records",
      "item": "https://withong.github.io/record/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "JWT (JSON Web Token)",
      "item": "https://withong.github.io/record/2025-04-10/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "JWT (JSON Web Token)",
  "name": "JWT (JSON Web Token)",
  "description": "\r1. JWT란? JWT (JSON Web Token) 은 사용자 인증에 사용되는 토큰 기반 인증 방식 중 하나로,\n서버에 상태를 저장하지 않고도 인증 정보를 유지할 수 있는 구조다.\n구조\n헤더(header).페이로드(payload).서명(signature) Base64로 인코딩되며, payload는 누구나 디코딩 가능하므로 민감 정보를 넣지 않는다.\n서명(Signature) 으로 토큰의 위변조 여부를 서버가 확인할 수 있다.\n주된 목적: 정보의 위변조 방지 (정보 보호 아님)\n2. 설정 방법 Spring Boot + JPA 프로젝트 기준\nbuild.gradle\ndependencies { implementation \u0026#39;org.springframework.boot:spring-boot-starter-data-jpa\u0026#39; implementation \u0026#39;org.springframework.boot:spring-boot-starter-validation\u0026#39; implementation \u0026#39;org.springframework.boot:spring-boot-starter-web\u0026#39; implementation \u0026#39;at.favre.lib:bcrypt:0.10.2\u0026#39; compileOnly \u0026#39;org.projectlombok:lombok\u0026#39; runtimeOnly \u0026#39;com.mysql:mysql-connector-j\u0026#39; annotationProcessor \u0026#39;org.projectlombok:lombok\u0026#39; testImplementation \u0026#39;org.springframework.boot:spring-boot-starter-test\u0026#39; testRuntimeOnly \u0026#39;org.junit.platform:junit-platform-launcher\u0026#39; // JWT 관련 추가 implementation \u0026#39;io.jsonwebtoken:jjwt-api:0.11.2\u0026#39; implementation \u0026#39;io.jsonwebtoken:jjwt-impl:0.11.2\u0026#39; implementation \u0026#39;io.jsonwebtoken:jjwt-jackson:0.11.2\u0026#39; } 3. JWT 구조 및 인증 흐름 JWT 구조 구성 요소 설명 Header 알고리즘 정보 (예: HS256) Payload 사용자 정보(예: username) 및 만료 시간 등 Signature secret key를 기반으로 만든 서명, 위변조 방지용 JWT 인증 흐름 클라이언트가 로그인 요청 (POST /login) 서버가 사용자 인증 후 JWT 생성 클라이언트는 JWT를 응답으로 받고, 저장 (쿠키, 로컬 스토리지 등) 이후 요청마다 JWT를 Authorization 헤더에 담아 전송 서버는 JWT 유효성 검사 (서명, 만료 여부 확인) 인증 통과 시 사용자 정보 추출 후 요청 처리 4. 로그인 구현 예시 User 엔티티\n",
  "keywords": [
    
  ],
  "articleBody": "\r1. JWT란? JWT (JSON Web Token) 은 사용자 인증에 사용되는 토큰 기반 인증 방식 중 하나로,\n서버에 상태를 저장하지 않고도 인증 정보를 유지할 수 있는 구조다.\n구조\n헤더(header).페이로드(payload).서명(signature) Base64로 인코딩되며, payload는 누구나 디코딩 가능하므로 민감 정보를 넣지 않는다.\n서명(Signature) 으로 토큰의 위변조 여부를 서버가 확인할 수 있다.\n주된 목적: 정보의 위변조 방지 (정보 보호 아님)\n2. 설정 방법 Spring Boot + JPA 프로젝트 기준\nbuild.gradle\ndependencies { implementation 'org.springframework.boot:spring-boot-starter-data-jpa' implementation 'org.springframework.boot:spring-boot-starter-validation' implementation 'org.springframework.boot:spring-boot-starter-web' implementation 'at.favre.lib:bcrypt:0.10.2' compileOnly 'org.projectlombok:lombok' runtimeOnly 'com.mysql:mysql-connector-j' annotationProcessor 'org.projectlombok:lombok' testImplementation 'org.springframework.boot:spring-boot-starter-test' testRuntimeOnly 'org.junit.platform:junit-platform-launcher' // JWT 관련 추가 implementation 'io.jsonwebtoken:jjwt-api:0.11.2' implementation 'io.jsonwebtoken:jjwt-impl:0.11.2' implementation 'io.jsonwebtoken:jjwt-jackson:0.11.2' } 3. JWT 구조 및 인증 흐름 JWT 구조 구성 요소 설명 Header 알고리즘 정보 (예: HS256) Payload 사용자 정보(예: username) 및 만료 시간 등 Signature secret key를 기반으로 만든 서명, 위변조 방지용 JWT 인증 흐름 클라이언트가 로그인 요청 (POST /login) 서버가 사용자 인증 후 JWT 생성 클라이언트는 JWT를 응답으로 받고, 저장 (쿠키, 로컬 스토리지 등) 이후 요청마다 JWT를 Authorization 헤더에 담아 전송 서버는 JWT 유효성 검사 (서명, 만료 여부 확인) 인증 통과 시 사용자 정보 추출 후 요청 처리 4. 로그인 구현 예시 User 엔티티\n@Entity public class User { @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; private String username; private String password; } UserRepository\npublic interface UserRepository extends JpaRepository\u003cUser, Long\u003e { Optional\u003cUser\u003e findByUsername(String username); } JwtUtil\npublic class JwtUtil { private static final String SECRET_KEY = \"my-secret-key\"; private static final long EXPIRATION_TIME = 1000 * 60 * 60; public static String createToken(String username) { return Jwts.builder() .setSubject(username) .setExpiration(new Date(System.currentTimeMillis() + EXPIRATION_TIME)) .signWith(SignatureAlgorithm.HS256, SECRET_KEY) .compact(); } public static String getUsername(String token) { return Jwts.parser() .setSigningKey(SECRET_KEY) .parseClaimsJws(token) .getBody() .getSubject(); } } UserController\n@RestController public class UserController { private final UserRepository userRepository; private final PasswordEncoder passwordEncoder = new BCryptPasswordEncoder(); public UserController(UserRepository userRepository) { this.userRepository = userRepository; } @PostMapping(\"/signup\") public ResponseEntity\u003c?\u003e signup(@RequestBody User user) { if (userRepository.findByUsername(user.getUsername()).isPresent()) { return ResponseEntity.badRequest().body(\"이미 존재하는 사용자입니다.\"); } user.setPassword(passwordEncoder.encode(user.getPassword())); userRepository.save(user); return ResponseEntity.ok(\"회원가입 완료\"); } @PostMapping(\"/login\") public ResponseEntity\u003c?\u003e login(@RequestBody User user) { Optional\u003cUser\u003e found = userRepository.findByUsername(user.getUsername()); if (found.isEmpty()) { return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(\"존재하지 않는 사용자입니다.\"); } User realUser = found.get(); if (!passwordEncoder.matches(user.getPassword(), realUser.getPassword())) { return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(\"비밀번호 불일치\"); } String token = JwtUtil.createToken(realUser.getUsername()); return ResponseEntity.ok(Collections.singletonMap(\"token\", token)); } } 5. 인증 구현 예시 (JWT 필터) JwtFilter\n@Component public class JwtFilter implements Filter { @Override public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException { HttpServletRequest httpRequest = (HttpServletRequest) request; String authHeader = httpRequest.getHeader(\"Authorization\"); if (authHeader != null \u0026\u0026 authHeader.startsWith(\"Bearer \")) { String token = authHeader.substring(7); try { String username = JwtUtil.getUsername(token); httpRequest.setAttribute(\"username\", username); // 요청에 사용자 정보 저장 } catch (Exception e) { HttpServletResponse httpRes = (HttpServletResponse) response; httpRes.setStatus(HttpStatus.UNAUTHORIZED); return; } } chain.doFilter(request, response); } } WebConfig에 Filter 등록\n@Configuration public class WebConfig { @Bean public FilterRegistrationBean\u003cJwtFilter\u003e jwtFilter() { FilterRegistrationBean\u003cJwtFilter\u003e filter = new FilterRegistrationBean\u003c\u003e(); filter.setFilter(new JwtFilter()); filter.addUrlPatterns(\"/api/*\"); // 인증 필요 경로 return filter; } } 인증 필요한 Controller\n@RestController @RequestMapping(\"/api/posts\") public class PostController { @GetMapping(\"/me\") public ResponseEntity\u003c?\u003e myPage(HttpServletRequest request) { String username = (String) request.getAttribute(\"username\"); if (username == null) { return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(\"인증 필요\"); } return ResponseEntity.ok(\"사용자: \" + username); } } 6. 로그아웃 구현 예시 기본 방법: 클라이언트에서 JWT 삭제 서버는 상태 저장을 하지 않기 때문에 토큰을 서버 측에서 무효화할 수 없음 클라이언트에서 localStorage, sessionStorage, 또는 쿠키에 저장된 JWT를 삭제하면 로그아웃 확장 방법: 블랙리스트 방식 (선택 사항) 로그아웃 요청 시 토큰을 서버 저장소에 기록 (예: Redis) 필터에서 요청마다 토큰이 블랙리스트에 있는지 확인 블랙리스트 방식 예시\n@PostMapping(\"/logout\") public ResponseEntity\u003c?\u003e logout(HttpServletRequest request) { String token = request.getHeader(\"Authorization\").substring(7); blacklistService.add(token); // Redis나 Map 등에 저장 return ResponseEntity.ok(\"로그아웃 완료\"); } 7. 주의사항 항목 설명 토큰 만료 설정 짧게 유지하여 탈취 위험 감소 (보통 15분~1시간) Refresh Token 도입 Access Token 만료 시, Refresh Token으로 재발급 가능 HTTPS 사용 JWT가 평문으로 전송되므로 HTTPS로 보안을 유지해야 함 민감 정보 저장 금지 JWT Payload는 누구나 열람 가능하므로 개인정보 저장 금지 ",
  "wordCount" : "616",
  "inLanguage": "ko",
  "datePublished": "2025-04-10T20:22:48+09:00",
  "dateModified": "2025-04-10T20:22:48+09:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://withong.github.io/record/2025-04-10/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "withong",
    "logo": {
      "@type": "ImageObject",
      "url": "https://withong.github.io/icons/rec.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://withong.github.io/" accesskey="h" title="withong (Alt + H)">withong</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://withong.github.io/log/" title="☰">
                    <span>☰</span>
                </a>
            </li>
            <li>
                <a href="https://withong.github.io/record/" title="Record">
                    <span>Record</span>
                </a>
            </li>
            <li>
                <a href="https://withong.github.io/project/" title="Project">
                    <span>Project</span>
                </a>
            </li>
            <li>
                <a href="https://withong.github.io/tag/" title="Tag">
                    <span>Tag</span>
                </a>
            </li>
            <li>
                <a href="https://withong.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://withong.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://withong.github.io/record/">Study Records</a></div>
    <h1 class="post-title entry-hint-parent">
      JWT (JSON Web Token)
    </h1>
    <div class="post-meta"><span title='2025-04-10 20:22:48 +0900 KST'>2025년 4월 10일</span>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">목차</span>
        </summary>

        <div class="inner"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-jwt란">1. JWT란?</a></li>
    <li><a href="#2-설정-방법">2. 설정 방법</a></li>
    <li><a href="#3-jwt-구조-및-인증-흐름">3. JWT 구조 및 인증 흐름</a>
      <ul>
        <li><a href="#jwt-구조">JWT 구조</a></li>
        <li><a href="#jwt-인증-흐름">JWT 인증 흐름</a></li>
      </ul>
    </li>
    <li><a href="#4-로그인-구현-예시">4. 로그인 구현 예시</a></li>
    <li><a href="#5-인증-구현-예시-jwt-필터">5. 인증 구현 예시 (JWT 필터)</a></li>
    <li><a href="#6-로그아웃-구현-예시">6. 로그아웃 구현 예시</a>
      <ul>
        <li><a href="#기본-방법-클라이언트에서-jwt-삭제">기본 방법: 클라이언트에서 JWT 삭제</a></li>
        <li><a href="#확장-방법-블랙리스트-방식-선택-사항">확장 방법: 블랙리스트 방식 (선택 사항)</a></li>
      </ul>
    </li>
    <li><a href="#7-주의사항">7. 주의사항</a></li>
  </ul>
</nav>
        </div>
    </details>
</div>

  <div class="post-content"><hr>
<br>
<h2 id="1-jwt란">1. JWT란?<a hidden class="anchor" aria-hidden="true" href="#1-jwt란">#</a></h2>
<p><strong>JWT (JSON Web Token)</strong> 은 사용자 인증에 사용되는 <strong>토큰 기반 인증 방식</strong> 중 하나로,<br>
<strong>서버에 상태를 저장하지 않고도 인증 정보를 유지할 수 있는 구조</strong>다.</p>
<ul>
<li>
<p><strong>구조</strong></p>
<pre tabindex="0"><code>헤더(header).페이로드(payload).서명(signature)
</code></pre></li>
<li>
<p><strong>Base64로 인코딩</strong>되며, <strong>payload는 누구나 디코딩 가능</strong>하므로 민감 정보를 넣지 않는다.</p>
</li>
<li>
<p><strong>서명(Signature)</strong> 으로 토큰의 위변조 여부를 서버가 확인할 수 있다.</p>
</li>
<li>
<p><strong>주된 목적</strong>: 정보의 위변조 방지 (정보 보호 아님)</p>
</li>
</ul>
<br>
<h2 id="2-설정-방법">2. 설정 방법<a hidden class="anchor" aria-hidden="true" href="#2-설정-방법">#</a></h2>
<p>Spring Boot + JPA 프로젝트 기준</p>
<p><strong>build.gradle</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-groovy" data-lang="groovy"><span class="line"><span class="cl"><span class="n">dependencies</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">implementation</span> <span class="s1">&#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">implementation</span> <span class="s1">&#39;org.springframework.boot:spring-boot-starter-validation&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">implementation</span> <span class="s1">&#39;org.springframework.boot:spring-boot-starter-web&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">implementation</span> <span class="s1">&#39;at.favre.lib:bcrypt:0.10.2&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">compileOnly</span> <span class="s1">&#39;org.projectlombok:lombok&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">runtimeOnly</span> <span class="s1">&#39;com.mysql:mysql-connector-j&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">annotationProcessor</span> <span class="s1">&#39;org.projectlombok:lombok&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">testImplementation</span> <span class="s1">&#39;org.springframework.boot:spring-boot-starter-test&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">testRuntimeOnly</span> <span class="s1">&#39;org.junit.platform:junit-platform-launcher&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// JWT 관련 추가
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">implementation</span> <span class="s1">&#39;io.jsonwebtoken:jjwt-api:0.11.2&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">implementation</span> <span class="s1">&#39;io.jsonwebtoken:jjwt-impl:0.11.2&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">implementation</span> <span class="s1">&#39;io.jsonwebtoken:jjwt-jackson:0.11.2&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><br>
<h2 id="3-jwt-구조-및-인증-흐름">3. JWT 구조 및 인증 흐름<a hidden class="anchor" aria-hidden="true" href="#3-jwt-구조-및-인증-흐름">#</a></h2>
<h3 id="jwt-구조">JWT 구조<a hidden class="anchor" aria-hidden="true" href="#jwt-구조">#</a></h3>
<table>
  <thead>
      <tr>
          <th>구성 요소</th>
          <th>설명</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Header</td>
          <td>알고리즘 정보 (예: HS256)</td>
      </tr>
      <tr>
          <td>Payload</td>
          <td>사용자 정보(예: username) 및 만료 시간 등</td>
      </tr>
      <tr>
          <td>Signature</td>
          <td>secret key를 기반으로 만든 서명, 위변조 방지용</td>
      </tr>
  </tbody>
</table>
<h3 id="jwt-인증-흐름">JWT 인증 흐름<a hidden class="anchor" aria-hidden="true" href="#jwt-인증-흐름">#</a></h3>
<ol>
<li>클라이언트가 로그인 요청 (POST /login)</li>
<li>서버가 사용자 인증 후 JWT 생성</li>
<li>클라이언트는 JWT를 응답으로 받고, 저장 (쿠키, 로컬 스토리지 등)</li>
<li>이후 요청마다 JWT를 Authorization 헤더에 담아 전송</li>
<li>서버는 JWT 유효성 검사 (서명, 만료 여부 확인)</li>
<li>인증 통과 시 사용자 정보 추출 후 요청 처리</li>
</ol>
<br>
<h2 id="4-로그인-구현-예시">4. 로그인 구현 예시<a hidden class="anchor" aria-hidden="true" href="#4-로그인-구현-예시">#</a></h2>
<p><strong>User 엔티티</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Entity</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Id</span><span class="w"> </span><span class="nd">@GeneratedValue</span><span class="p">(</span><span class="n">strategy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GenerationType</span><span class="p">.</span><span class="na">IDENTITY</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">username</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">password</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p><strong>UserRepository</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">UserRepository</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">JpaRepository</span><span class="o">&lt;</span><span class="n">User</span><span class="p">,</span><span class="w"> </span><span class="n">Long</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByUsername</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">username</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p><strong>JwtUtil</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JwtUtil</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">SECRET_KEY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;my-secret-key&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">EXPIRATION_TIME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">1000</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">60</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">60</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">createToken</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">username</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Jwts</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">setSubject</span><span class="p">(</span><span class="n">username</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">setExpiration</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">currentTimeMillis</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">EXPIRATION_TIME</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">signWith</span><span class="p">(</span><span class="n">SignatureAlgorithm</span><span class="p">.</span><span class="na">HS256</span><span class="p">,</span><span class="w"> </span><span class="n">SECRET_KEY</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">compact</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getUsername</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">token</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Jwts</span><span class="p">.</span><span class="na">parser</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">setSigningKey</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">parseClaimsJws</span><span class="p">(</span><span class="n">token</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">getBody</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">getSubject</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p><strong>UserController</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@RestController</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserController</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">UserRepository</span><span class="w"> </span><span class="n">userRepository</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">PasswordEncoder</span><span class="w"> </span><span class="n">passwordEncoder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BCryptPasswordEncoder</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">UserController</span><span class="p">(</span><span class="n">UserRepository</span><span class="w"> </span><span class="n">userRepository</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">userRepository</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userRepository</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&#34;/signup&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">signup</span><span class="p">(</span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">userRepository</span><span class="p">.</span><span class="na">findByUsername</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getUsername</span><span class="p">()).</span><span class="na">isPresent</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">badRequest</span><span class="p">().</span><span class="na">body</span><span class="p">(</span><span class="s">&#34;이미 존재하는 사용자입니다.&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setPassword</span><span class="p">(</span><span class="n">passwordEncoder</span><span class="p">.</span><span class="na">encode</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getPassword</span><span class="p">()));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">userRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">user</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="s">&#34;회원가입 완료&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&#34;/login&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">login</span><span class="p">(</span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userRepository</span><span class="p">.</span><span class="na">findByUsername</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getUsername</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">found</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">UNAUTHORIZED</span><span class="p">).</span><span class="na">body</span><span class="p">(</span><span class="s">&#34;존재하지 않는 사용자입니다.&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">realUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">found</span><span class="p">.</span><span class="na">get</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">passwordEncoder</span><span class="p">.</span><span class="na">matches</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getPassword</span><span class="p">(),</span><span class="w"> </span><span class="n">realUser</span><span class="p">.</span><span class="na">getPassword</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">UNAUTHORIZED</span><span class="p">).</span><span class="na">body</span><span class="p">(</span><span class="s">&#34;비밀번호 불일치&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JwtUtil</span><span class="p">.</span><span class="na">createToken</span><span class="p">(</span><span class="n">realUser</span><span class="p">.</span><span class="na">getUsername</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">Collections</span><span class="p">.</span><span class="na">singletonMap</span><span class="p">(</span><span class="s">&#34;token&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">token</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><br>
<h2 id="5-인증-구현-예시-jwt-필터">5. 인증 구현 예시 (JWT 필터)<a hidden class="anchor" aria-hidden="true" href="#5-인증-구현-예시-jwt-필터">#</a></h2>
<p><strong>JwtFilter</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Component</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JwtFilter</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Filter</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doFilter</span><span class="p">(</span><span class="n">ServletRequest</span><span class="w"> </span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">ServletResponse</span><span class="w"> </span><span class="n">response</span><span class="p">,</span><span class="w"> </span><span class="n">FilterChain</span><span class="w"> </span><span class="n">chain</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="p">,</span><span class="w"> </span><span class="n">ServletException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">httpRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="p">)</span><span class="w"> </span><span class="n">request</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">authHeader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">httpRequest</span><span class="p">.</span><span class="na">getHeader</span><span class="p">(</span><span class="s">&#34;Authorization&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">authHeader</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">authHeader</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&#34;Bearer &#34;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">authHeader</span><span class="p">.</span><span class="na">substring</span><span class="p">(</span><span class="n">7</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">String</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JwtUtil</span><span class="p">.</span><span class="na">getUsername</span><span class="p">(</span><span class="n">token</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">httpRequest</span><span class="p">.</span><span class="na">setAttribute</span><span class="p">(</span><span class="s">&#34;username&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">username</span><span class="p">);</span><span class="w"> </span><span class="c1">// 요청에 사용자 정보 저장</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">HttpServletResponse</span><span class="w"> </span><span class="n">httpRes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">HttpServletResponse</span><span class="p">)</span><span class="w"> </span><span class="n">response</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">httpRes</span><span class="p">.</span><span class="na">setStatus</span><span class="p">(</span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">UNAUTHORIZED</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">return</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">chain</span><span class="p">.</span><span class="na">doFilter</span><span class="p">(</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p><strong>WebConfig에 Filter 등록</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Configuration</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">WebConfig</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Bean</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">FilterRegistrationBean</span><span class="o">&lt;</span><span class="n">JwtFilter</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">jwtFilter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">FilterRegistrationBean</span><span class="o">&lt;</span><span class="n">JwtFilter</span><span class="o">&gt;</span><span class="w"> </span><span class="n">filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FilterRegistrationBean</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">filter</span><span class="p">.</span><span class="na">setFilter</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">JwtFilter</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">filter</span><span class="p">.</span><span class="na">addUrlPatterns</span><span class="p">(</span><span class="s">&#34;/api/*&#34;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 인증 필요 경로</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">filter</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p><strong>인증 필요한 Controller</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@RestController</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&#34;/api/posts&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PostController</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&#34;/me&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">myPage</span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="p">)</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getAttribute</span><span class="p">(</span><span class="s">&#34;username&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">username</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">UNAUTHORIZED</span><span class="p">).</span><span class="na">body</span><span class="p">(</span><span class="s">&#34;인증 필요&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="s">&#34;사용자: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">username</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><br>
<h2 id="6-로그아웃-구현-예시">6. 로그아웃 구현 예시<a hidden class="anchor" aria-hidden="true" href="#6-로그아웃-구현-예시">#</a></h2>
<h3 id="기본-방법-클라이언트에서-jwt-삭제">기본 방법: 클라이언트에서 JWT 삭제<a hidden class="anchor" aria-hidden="true" href="#기본-방법-클라이언트에서-jwt-삭제">#</a></h3>
<ul>
<li>서버는 상태 저장을 하지 않기 때문에 토큰을 <strong>서버 측에서 무효화할 수 없음</strong></li>
<li>클라이언트에서 <code>localStorage</code>, <code>sessionStorage</code>, 또는 쿠키에 저장된 JWT를 삭제하면 로그아웃</li>
</ul>
<h3 id="확장-방법-블랙리스트-방식-선택-사항">확장 방법: 블랙리스트 방식 (선택 사항)<a hidden class="anchor" aria-hidden="true" href="#확장-방법-블랙리스트-방식-선택-사항">#</a></h3>
<ul>
<li>로그아웃 요청 시 토큰을 서버 저장소에 기록 (예: Redis)</li>
<li>필터에서 요청마다 토큰이 블랙리스트에 있는지 확인</li>
</ul>
<p><strong>블랙리스트 방식 예시</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&#34;/logout&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">logout</span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getHeader</span><span class="p">(</span><span class="s">&#34;Authorization&#34;</span><span class="p">).</span><span class="na">substring</span><span class="p">(</span><span class="n">7</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">blacklistService</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">token</span><span class="p">);</span><span class="w"> </span><span class="c1">// Redis나 Map 등에 저장</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="s">&#34;로그아웃 완료&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><br>
<h2 id="7-주의사항">7. 주의사항<a hidden class="anchor" aria-hidden="true" href="#7-주의사항">#</a></h2>
<table>
  <thead>
      <tr>
          <th>항목</th>
          <th>설명</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>토큰 만료 설정</td>
          <td>짧게 유지하여 탈취 위험 감소 (보통 15분~1시간)</td>
      </tr>
      <tr>
          <td>Refresh Token 도입</td>
          <td>Access Token 만료 시, Refresh Token으로 재발급 가능</td>
      </tr>
      <tr>
          <td>HTTPS 사용</td>
          <td>JWT가 평문으로 전송되므로 HTTPS로 보안을 유지해야 함</td>
      </tr>
      <tr>
          <td>민감 정보 저장 금지</td>
          <td>JWT Payload는 누구나 열람 가능하므로 개인정보 저장 금지</td>
      </tr>
  </tbody>
</table>
<br>
<hr>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="https://withong.github.io/project/schedule-02/">
    <span class="title">« Prev</span>
    <br>
    <span>일정 관리 API (JPA) 트러블 슈팅</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://withong.github.io/">withong</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = '✔';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
