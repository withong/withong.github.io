<!DOCTYPE html>
<html lang="ko" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>[내일배움캠프] 계산기 Lv 3 | withong</title>
<meta name="keywords" content="">
<meta name="description" content="요구사항
Enum, 제네릭, 람다 &amp; 스트림을 이해한 계산기 만들기


현재 사칙연산 계산기는 (➕,➖,✖️,➗) 이렇게 총 4가지 연산 타입으로 구성되어 있습니다.

Enum 타입을 활용하여 연산자 타입에 대한 정보를 관리하고 이를 사칙연산 계산기 ArithmeticCalculator 클래스에 활용 해봅니다.



실수, 즉 double 타입의 값을 전달 받아도 연산이 수행하도록 만들기

키워드 : 제네릭

단순히, 기존의 Int 타입을 double 타입으로 바꾸는 게 아닌 점에 주의하세요!


지금까지는 ArithmeticCalculator, 즉 사칙연산 계산기는 양의 정수(0 포함)를 매개변수로 전달받아 연산을 수행
피연산자를 여러 타입으로 받을 수 있도록 기능을 확장

ArithmeticCalculator 클래스의 연산 메서드(calculate)


위 요구사항을 만족할 수 있도록 ArithmeticCalculator 클래스를 수정합니다. (제네릭)

추가적으로 수정이 필요한 다른 클래스나 메서드가 있다면 같이 수정 해주세요.





저장된 연산 결과들 중 Scanner로 입력받은 값보다 큰 결과값 들을 출력">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/camp/task-calculator-03/">
<link crossorigin="anonymous" href="http://localhost:1313/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/icons/code.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/icons/code.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/icons/code.png">
<link rel="apple-touch-icon" href="http://localhost:1313/icons/zep.png">
<link rel="mask-icon" href="http://localhost:1313/icons/zep.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="ko" href="http://localhost:1313/camp/task-calculator-03/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="withong (Alt + H)">withong</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/log/" title="Log">
                    <span>Log</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/topic/" title="Topic">
                    <span>Topic</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tag/" title="Tag">
                    <span>Tag</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="http://localhost:1313/camp/">Camp</a></div>
    <h1 class="post-title entry-hint-parent">
      [내일배움캠프] 계산기 Lv 3
    </h1>
    <div class="post-meta"><span title='2025-03-05 22:00:00 +0900 KST'>2025년 3월 5일</span>

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">목차</span>
        </summary>

        <div class="inner"><nav id="TableOfContents">
  <ul>
    <li><a href="#요구사항">요구사항</a></li>
    <li><a href="#파일-구조">파일 구조</a></li>
    <li><a href="#기능-구현">기능 구현</a>
      <ul>
        <li><a href="#app">App</a></li>
        <li><a href="#inputvalidator">InputValidator</a></li>
        <li><a href="#operand">Operand</a></li>
        <li><a href="#operator">Operator</a></li>
        <li><a href="#calculationrecord">CalculationRecord</a></li>
        <li><a href="#arithmeticcalculator">ArithmeticCalculator</a></li>
        <li><a href="#calculatorexception">CalculatorException</a></li>
      </ul>
    </li>
    <li><a href="#문제-및-해결">문제 및 해결</a>
      <ul>
        <li><a href="#타입-변환-및-연산-과정">타입 변환 및 연산 과정</a></li>
        <li><a href="#과학적-표기법">과학적 표기법</a></li>
      </ul>
    </li>
    <li><a href="#실행-예시">실행 예시</a></li>
  </ul>
</nav>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="요구사항">요구사항<a hidden class="anchor" aria-hidden="true" href="#요구사항">#</a></h2>
<p>Enum, 제네릭, 람다 &amp; 스트림을 이해한 계산기 만들기</p>
<ul>
<li>
<p><strong>현재 사칙연산 계산기는 (➕,➖,✖️,➗) 이렇게 총 4가지 연산 타입으로 구성되어 있습니다.</strong></p>
<ul>
<li>Enum 타입을 활용하여 연산자 타입에 대한 정보를 관리하고 이를 사칙연산 계산기 ArithmeticCalculator 클래스에 활용 해봅니다.</li>
</ul>
</li>
<li>
<p><strong>실수, 즉 double 타입의 값을 전달 받아도 연산이 수행하도록 만들기</strong></p>
<ul>
<li>키워드 : <code>제네릭</code>
<ul>
<li>단순히, 기존의 Int 타입을 double 타입으로 바꾸는 게 아닌 점에 주의하세요!</li>
</ul>
</li>
<li>지금까지는 ArithmeticCalculator, 즉 사칙연산 계산기는 양의 정수(0 포함)를 매개변수로 전달받아 연산을 수행</li>
<li>피연산자를 여러 타입으로 받을 수 있도록 기능을 확장
<ul>
<li>ArithmeticCalculator 클래스의 연산 메서드(<code>calculate</code>)</li>
</ul>
</li>
<li>위 요구사항을 만족할 수 있도록 ArithmeticCalculator 클래스를 수정합니다. (제네릭)
<ul>
<li>추가적으로 수정이 필요한 다른 클래스나 메서드가 있다면 같이 수정 해주세요.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>저장된 연산 결과들 중 Scanner로 입력받은 값보다 큰 결과값 들을 출력</strong></p>
<ul>
<li>ArithmeticCalculator 클래스에 위 요구사항을 만족하는 조회 메서드를 구현합니다.</li>
<li>단, 해당 메서드를 구현할 때 Lambda &amp; Stream을 활용하여 구현합니다.</li>
</ul>
</li>
</ul>
<hr>
<h2 id="파일-구조">파일 구조<a hidden class="anchor" aria-hidden="true" href="#파일-구조">#</a></h2>
<table>
  <thead>
      <tr>
          <th>파일명</th>
          <th>패키지</th>
          <th>역할</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>App.java</code></td>
          <td><code>calculator.level3.ui</code></td>
          <td>프로그램 실행 및 메뉴 제공</td>
      </tr>
      <tr>
          <td><code>InputValidator.java</code></td>
          <td><code>calculator.level3.ui</code></td>
          <td>사용자 입력 검증</td>
      </tr>
      <tr>
          <td><code>Operand.java</code></td>
          <td><code>calculator.level3.model</code></td>
          <td>피연산자(<code>BigDecimal</code> 변환 포함)</td>
      </tr>
      <tr>
          <td><code>Operator.java</code></td>
          <td><code>calculator.level3.model</code></td>
          <td>연산자(+, -, *, /) 및 연산 수행</td>
      </tr>
      <tr>
          <td><code>CalculationRecord.java</code></td>
          <td><code>calculator.level3.model</code></td>
          <td>연산 기록 저장 객체</td>
      </tr>
      <tr>
          <td><code>ArithmeticCalculator.java</code></td>
          <td><code>calculator.level3.service</code></td>
          <td>실제 계산 수행 및 기록 관리</td>
      </tr>
      <tr>
          <td><code>CalculatorException.java</code></td>
          <td><code>calculator.level3.exception</code></td>
          <td>예외 처리 클래스</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="기능-구현">기능 구현<a hidden class="anchor" aria-hidden="true" href="#기능-구현">#</a></h2>
<p><a href="https://github.com/withong/nbc-chapter-02/tree/main/calculator/level3"># 전체 코드</a></p>
<h3 id="app">App<a hidden class="anchor" aria-hidden="true" href="#app">#</a></h3>
<ul>
<li>
<p><strong><code>main(String[] args)</code></strong></p>
<ul>
<li>메뉴 번호를 입력받아 처리</li>
<li><code>1</code> 입력 시 피연산자 2개, 연산자 입력받고 연산 수행</li>
<li><code>2</code> 입력 시 연산 기록 조회</li>
<li><code>3</code> 입력 시 기록 선택/전체 삭제</li>
<li><code>4</code> 입력 시 결과 검색(특정 값보다 큰/작은/같은 결과)</li>
<li><code>5</code> 입력 시 프로그램 종료</li>
<li>잘못된 메뉴 번호는 예외 발생</li>
<li>모든 예외는 catch 후 메시지 출력</li>
</ul>
</li>
</ul>
<hr>
<h3 id="inputvalidator">InputValidator<a hidden class="anchor" aria-hidden="true" href="#inputvalidator">#</a></h3>
<ul>
<li>
<p><strong><code>getValidInt()</code></strong></p>
<ul>
<li>메뉴 번호를 입력받음</li>
<li>빈 값이면 예외 발생</li>
<li>숫자가 아닌 문자가 섞여 있으면 예외 발생</li>
<li>정상 정수면 int로 파싱해 반환</li>
</ul>
</li>
<li>
<p><strong><code>getValidNumber(String message)</code></strong></p>
<ul>
<li>사용자 입력받음</li>
<li>빈 값이면 예외 발생</li>
<li>숫자로 변환 불가능하면 예외 발생</li>
<li>BigDecimal로 변환 후 Operand&lt;BigDecimal&gt; 형태로 감싸 반환</li>
</ul>
</li>
<li>
<p><strong><code>getValidOperator()</code></strong></p>
<ul>
<li>연산자 입력받음</li>
<li>빈 값이면 예외 발생</li>
<li><code>+</code> <code>-</code> <code>*</code> <code>/</code> 중 하나가 아니면 예외 발생</li>
<li>해당 기호의 Operator enum을 찾아 반환</li>
</ul>
</li>
<li>
<p><strong><code>selectRecordsWhere(ArithmeticCalculator calculator)</code></strong></p>
<ul>
<li>메뉴 번호와 기준 값을 입력받아 처리</li>
<li><code>1</code> 기준 값보다 큰 연산 결과 검색</li>
<li><code>2</code> 기준 값보다 작은 연산 결과 검색</li>
<li><code>3</code> 기준 값과 일치하는 연산 결과 검색</li>
<li>빈 값이면 메서드 즉시 종료(취소 처리 → null 반환)</li>
<li>BigDecimal 변환 후, calculator.getRecords()를 스트림으로 순회</li>
<li>result를 toBigDecimal() 한 뒤 기준값과 비교</li>
<li>조건(<code>&gt;</code> <code>&lt;</code> <code>=</code>) 만족하는 기록만 필터링하여 반환</li>
</ul>
</li>
<li>
<p><strong><code>selectRecordToRemove(ArithmeticCalculator calculator)</code></strong></p>
<ul>
<li>목록을 보여주고, 삭제할 기록 번호나 all을 입력받음</li>
<li>빈 값이면 취소 후 메서드 종료</li>
<li>all이면 전체 삭제 후 종료</li>
<li>정상 범위 번호면 해당 인덱스의 기록을 삭제</li>
<li>숫자가 아니거나 없는 메뉴 번호면 예외 발생</li>
</ul>
</li>
<li>
<p><strong><code>isNumber(String str)</code></strong></p>
<ul>
<li>전달받은 문자열이 BigDecimal로 파싱 가능한지 시도</li>
<li>성공하면 true, 실패하면 false</li>
</ul>
</li>
<li>
<p><strong><code>toBigDecimal(Operand&lt;?&gt; operand)</code></strong></p>
<ul>
<li>Operand의 getOperand()로 값을 꺼낸 뒤 BigDecimal로 변환</li>
<li>숫자가 아니면 예외 발생</li>
<li>변환 후 stripTrailingZeros</li>
</ul>
</li>
</ul>
<hr>
<h3 id="operand">Operand<a hidden class="anchor" aria-hidden="true" href="#operand">#</a></h3>
<ul>
<li>
<p><strong><code>Operand(T operand)</code></strong></p>
<ul>
<li>피연산자 값을 입력받아 내부 필드에 저장</li>
</ul>
</li>
<li>
<p><strong><code>getOperand()</code></strong></p>
<ul>
<li>내부에 저장된 피연산자 값을 그대로 반환</li>
</ul>
</li>
<li>
<p><strong><code>toBigDecimal()</code></strong></p>
<ul>
<li>내부 값이 BigDecimal 타입인지 확인</li>
<li>BigDecimal이면 그 값을 반환</li>
<li>그렇지 않으면 예외 발생</li>
</ul>
</li>
<li>
<p><strong><code>toString()</code></strong></p>
<ul>
<li>operand.toString() 결과를 반환</li>
</ul>
</li>
</ul>
<hr>
<h3 id="operator">Operator<a hidden class="anchor" aria-hidden="true" href="#operator">#</a></h3>
<ul>
<li>
<p><strong><code>Operator(String symbol)</code></strong></p>
<ul>
<li>Enum 생성자</li>
<li><code>+</code> <code>-</code> <code>*</code> <code>/</code> 등 기호를 symbol로 저장</li>
</ul>
</li>
<li>
<p><strong><code>apply(Operand&lt;?&gt; number1, Operand&lt;?&gt; number2)</code></strong></p>
<ul>
<li>두 피연산자의 toBigDecimal()을 호출해 BigDecimal로 변환</li>
<li>연산자 유형에 따라 add, subtract, multiply, divide 수행</li>
<li>divide 시 분모가 0이면 CalculatorException 발생</li>
<li>연산 결과(BigDecimal) 반환</li>
</ul>
</li>
</ul>
<hr>
<h3 id="calculationrecord">CalculationRecord<a hidden class="anchor" aria-hidden="true" href="#calculationrecord">#</a></h3>
<ul>
<li>
<p><strong><code>CalculationRecord(Operand&lt;?&gt; number1, Operator operator, Operand&lt;?&gt; number2, Operand&lt;?&gt; result)</code></strong></p>
<ul>
<li>연산에 사용된 피연산자 2개, 연산자, 결과를 입력받아 저장</li>
</ul>
</li>
<li>
<p><strong><code>getResult()</code></strong></p>
<ul>
<li>연산 결과 반환</li>
</ul>
</li>
<li>
<p><strong><code>toString()</code></strong></p>
<ul>
<li>[ number1 operator number2 = result ] 형태의 문자열 반환</li>
</ul>
</li>
</ul>
<hr>
<h3 id="arithmeticcalculator">ArithmeticCalculator<a hidden class="anchor" aria-hidden="true" href="#arithmeticcalculator">#</a></h3>
<ul>
<li>
<p><strong><code>ArithmeticCalculator()</code></strong></p>
<ul>
<li>내부 List&lt;CalculationRecord&gt; records 초기화</li>
</ul>
</li>
<li>
<p><strong><code>calculate(Operand&lt;?&gt; number1, Operator operator, Operand&lt;?&gt; number2)</code></strong></p>
<ul>
<li>operator.apply(number1, number2) 호출로 BigDecimal 연산 수행</li>
<li>예외 발생 시(0으로 나누기) &ldquo;정의되지 않음&rdquo; 문자열을 결과로 처리</li>
<li>정상 결과면 formatOperand(BigDecimal)로 포맷팅</li>
<li>updateRecord(&hellip;)로 기록을 저장한 뒤 결과 반환</li>
</ul>
</li>
<li>
<p><strong><code>getRecords()</code></strong></p>
<ul>
<li>records 리스트를 반환</li>
</ul>
</li>
<li>
<p><strong><code>removeRecord(int index)</code></strong></p>
<ul>
<li>해당 인덱스의 기록을 제거</li>
</ul>
</li>
<li>
<p><strong><code>clearRecords()</code></strong></p>
<ul>
<li>records 리스트를 비움</li>
</ul>
</li>
<li>
<p><strong><code>updateRecord(Operand&lt;?&gt; number1, Operator operator, Operand&lt;?&gt; number2, Operand&lt;?&gt; result)</code></strong></p>
<ul>
<li>records 리스트에 추가</li>
</ul>
</li>
<li>
<p><strong><code>formatOperand(BigDecimal result)</code></strong></p>
<ul>
<li>BigDecimal을 문자열로 변환(정수, 소수점 8자리, 과학적 표기 등)</li>
<li>변환된 문자열을 Operand&lt;String&gt; 형태로 감싸 반환</li>
</ul>
</li>
<li>
<p><strong><code>useScientificNotation(BigDecimal bigDecimal)</code></strong></p>
<ul>
<li>연산 결과에 과학적 표기법을 적용할 건지 검사</li>
<li>10자리 이상의 정수 또는 소수점 이하가 8자리 이상이면 true</li>
</ul>
</li>
</ul>
<hr>
<h3 id="calculatorexception">CalculatorException<a hidden class="anchor" aria-hidden="true" href="#calculatorexception">#</a></h3>
<ul>
<li>
<p><strong><code>CalculatorException(Type type)</code></strong></p>
<ul>
<li>예외 유형을 입력받아 내부 필드에 저장</li>
</ul>
</li>
<li>
<p><strong><code>getMessage()</code></strong></p>
<ul>
<li>Type에 따라 다른 메시지 반환</li>
<li>enum 내부에 Type 정의
<ul>
<li><strong>EMPTY_VALUE</strong> → &ldquo;<em>*</em> 입력된 값이 없습니다. ***&rdquo;</li>
<li><strong>INVALID_NUMBER</strong> → &ldquo;<em>*</em> 유효하지 않은 숫자입니다. ***&rdquo;</li>
<li><strong>INVALID_OPERATOR</strong> → &ldquo;<em>*</em> 유효하지 않은 연산자입니다. ***&rdquo;</li>
<li><strong>DIVISION_BY_ZERO</strong> → &ldquo;<em>*</em> 0으로 나눌 수 없습니다. ***&rdquo;</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h2 id="문제-및-해결">문제 및 해결<a hidden class="anchor" aria-hidden="true" href="#문제-및-해결">#</a></h2>
<h3 id="타입-변환-및-연산-과정">타입 변환 및 연산 과정<a hidden class="anchor" aria-hidden="true" href="#타입-변환-및-연산-과정">#</a></h3>
<ul>
<li>
<p><strong>문제</strong></p>
<ul>
<li>
<p>초기 설계 - Operand&lt;T&gt;를 정의하여 입력값을 검증한 후 **적절한 타입(Integer, Long, Double)**으로 변환. Integer, Long, Double을 지원하며, 혼합 연산 시 Double로 변환하여 연산.</p>
</li>
<li>
<p>타입 변환 과정</p>
<ul>
<li>소수 입력 → Operand&lt;Double&gt;</li>
<li>int 범위 → Operand&lt;Integer&gt;</li>
<li>int 초과 long 범위 → Operand&lt;Long&gt;</li>
<li>long 초과 → Operand&lt;Double&gt;</li>
</ul>
</li>
<li>
<p>Double 연산 시 부동소수점 오차 발생</p>
</li>
<li>
<p>Operand&lt;Integer&gt;, Operand&lt;Long&gt;를 받아서 Operand&lt;Double&gt;로 변환하는 코드가 중복됨 → Integer, Long을 Double로 변환하여 연산할 때 매 연산마다 Double.parseDouble()을 사용하여 변환해야 함.</p>
</li>
</ul>
</li>
<li>
<p><strong>분석</strong></p>
<ul>
<li>Double 연산 시 부동소수점 오차를 해결할 수 있는 방법은?<br>
→ BigDecimal을 사용하여 연산 수행<br>
→ BigDecimal은 부동소수점 오차 없이 정확한 연산이 가능.</li>
</ul>
</li>
<li>
<p><strong>해결 및 개선</strong></p>
<ul>
<li>모든 숫자를 Operand&lt;BigDecimal&gt;로 변환하여 저장, 연산 시에도 BigDecimal을 사용.</li>
<li>0으로 나누기 연산 오류 시 Operand&lt;String&gt;으로 &ldquo;정의되지 않음&rdquo; 문자열 저장.</li>
</ul>
</li>
<li>
<p><strong>결과</strong></p>
<ul>
<li>연산 과정에서 발생하는 부동소수점 오차 해결</li>
<li>모든 숫자를 BigDecimal로 통일하여 변환 과정 단순화</li>
<li>연산 메서드에서 Double 변환 없이 BigDecimal 연산 수행 가능</li>
</ul>
</li>
</ul>
<hr>
<h3 id="과학적-표기법">과학적 표기법<a hidden class="anchor" aria-hidden="true" href="#과학적-표기법">#</a></h3>
<ul>
<li>
<p><strong>문제</strong></p>
<ul>
<li>
<p><strong>소수점 8자리 포맷팅 + 과학적 표기법 동시 사용 이슈</strong> - 처음에는 DecimalFormat(&ldquo;0.########&quot;)로 8자리까지 소수점을 유지하려 했지만, 큰 수(예: 1.685644e9)에서는 **<em>아이폰 계산기</em>**처럼 1.685644e9 형태가 나오길 기대했으나, 실제 출력은 1.68564381645E9처럼 오차가 생기거나 소수 자릿수가 달라지는 문제가 발생.</p>
</li>
<li>
<p><strong>반올림 문제</strong> - DecimalFormat(&ldquo;0.######E0&rdquo;)를 쓰면 과학적 표기법 적용은 되지만, 소수점 이하가 0이면 정수형처럼 보이지 않거나, 소수점 자리가 의도치 않게 잘려서 반올림이 강제로 적용됨.</p>
</li>
<li>
<p><strong>부동소수점(Double) 오차 누적</strong> - 소수점 8자리로 맞춘 뒤에도, 내부에서 Double 변환이 섞여 있으면 “불필요한 자리수(0.30000000004 등)”가 생기는 문제가 계속 발생.</p>
</li>
</ul>
</li>
<li>
<p><strong>분석</strong></p>
<ul>
<li>Double 부동소수점 오차가 핵심 원인.
<ul>
<li>“0.30000000000000004” 등의 현상이 발생할 수 있고, 포맷팅 시에도 예기치 않은 자릿수로 반올림되는 경우가 있음.</li>
</ul>
</li>
<li>DecimalFormat만으로는 한계가 존재.
<ul>
<li>큰 수(소수점 이상 10자리 이상)나 소수점 이하 자릿수(8자리 이상)에서 원하는 대로 과학적 표기법을 적용하려면, 별도의 로직이나 세밀한 설정이 필요함.</li>
</ul>
</li>
<li>BigDecimal을 직접 사용해야 “소수점 N자리에서 정밀하게 반올림” + “원하지 않는 0 제거(stripTrailingZeros)” 등의 제어가 가능.</li>
</ul>
</li>
<li>
<p><strong>해결 및 개선</strong></p>
<ul>
<li>
<p>BigDecimal으로 연산</p>
<ul>
<li>중간에 Double를 거치지 않고, 입력부터 BigDecimal로 받음.</li>
<li>setScale(8, RoundingMode.HALF_UP)로 소수점 8자리 기준 반올림 후, stripTrailingZeros()로 불필요한 0 제거.</li>
</ul>
</li>
<li>
<p>과학적 표기법 적용 조건을 명시적으로 구현</p>
<ul>
<li>“소수점 이상 10자리 또는 소수점 이하 8자리 이상이면 과학적 표기법을 적용” 하는 식으로, 직접 기준을 잡아 로직 작성.</li>
<li>과학적 표기법 시에는 DecimalFormat(&ldquo;0.######E0&rdquo;)를 사용하되, 정수 형태(소수점 이하가 0)로 보일 때는 일반 포맷(#.########)을 사용하도록 분기.</li>
</ul>
</li>
<li>
<p>Double 변환 제거</p>
<ul>
<li>최종 결과를 다시 Double로 변환하지 않고, 문자열 상태로(Operand&lt;&gt;(formatted)) 반환해 최종 출력.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>결과</strong></p>
<ul>
<li>큰 수에서 1.685644e9처럼 표현되고, 일반 범위에서는 123.45678912처럼 8자리까지만 유지하는 등 원하는 형식대로 출력 가능.</li>
</ul>
</li>
</ul>
<hr>
<h2 id="실행-예시">실행 예시<a hidden class="anchor" aria-hidden="true" href="#실행-예시">#</a></h2>
<ul>
<li><strong>정상 실행 예시</strong></li>
</ul>
<pre tabindex="0"><code>--------- 계산기 Version 3.0 ---------
[1] 연산하기
[2] 연산 기록 조회하기
[3] 연산 기록 삭제하기
[4] 연산 결과 검색하기
[5] 종료하기
-------------------------------------
* 메뉴 번호를 입력하세요: 1
-------------------------------------
* 첫 번째 숫자를 입력하세요: 123
* 사용할 연산자를 입력하세요: +
* 두 번째 숫자를 입력하세요: 456
-------------------------------------
[ 123 + 456 = 579 ]
-------------------------------------
[1] 연산하기
[2] 연산 기록 조회하기
[3] 연산 기록 삭제하기
[4] 연산 결과 검색하기
[5] 종료하기
-------------------------------------
* 메뉴 번호를 입력하세요: 1
-------------------------------------
* 첫 번째 숫자를 입력하세요: 12345.15
* 사용할 연산자를 입력하세요: *
* 두 번째 숫자를 입력하세요: 136543
-------------------------------------
[ 12345.15 * 136543 = 1.685644e9 ]
-------------------------------------
[1] 연산하기
[2] 연산 기록 조회하기
[3] 연산 기록 삭제하기
[4] 연산 결과 검색하기
[5] 종료하기
-------------------------------------
* 메뉴 번호를 입력하세요: 2
-------------------------------------
[1] [ 123 + 456 = 579 ]
[2] [ 12345.15 * 136543 = 1.685644e9 ]
-------------------------------------
[1] 연산하기
[2] 연산 기록 조회하기
[3] 연산 기록 삭제하기
[4] 연산 결과 검색하기
[5] 종료하기
-------------------------------------
* 메뉴 번호를 입력하세요: 3
-------------------------------------
[1] [ 123 + 456 = 579 ]
[2] [ 12345.15 * 136543 = 1.685644e9 ]
-------------------------------------
* 삭제할 기록의 번호를 입력하세요.
[취소: enter][전체: all 입력] 1
***** 계산 기록이 삭제되었습니다. *****
-------------------------------------
[1] 연산하기
[2] 연산 기록 조회하기
[3] 연산 기록 삭제하기
[4] 연산 결과 검색하기
[5] 종료하기
-------------------------------------
* 메뉴 번호를 입력하세요: 4
-------------------------------------
[1] 보다 큰 값 검색하기
[2] 보다 작은 값 검색하기
[3] 일치하는 값 검색하기
-------------------------------------
* 메뉴 번호를 입력하세요. [취소: enter] 1
* 기준 값을 입력하세요: 1.685644e8
-------------------------------------
[1] [ 12345.15 * 136543 = 1.685644e9 ]
-------------------------------------
[1] 연산하기
[2] 연산 기록 조회하기
[3] 연산 기록 삭제하기
[4] 연산 결과 검색하기
[5] 종료하기
-------------------------------------
* 메뉴 번호를 입력하세요: 5
------------- 계산기 종료 -------------
</code></pre><ul>
<li><strong>예외 실행 예시</strong></li>
</ul>
<pre tabindex="0"><code>-------------------------------------
[1] 연산하기
[2] 연산 기록 조회하기
[3] 연산 기록 삭제하기
[4] 연산 결과 검색하기
[5] 종료하기
-------------------------------------
* 메뉴 번호를 입력하세요: 6
***** 유효하지 않은 숫자입니다. *****
-------------------------------------
</code></pre><pre tabindex="0"><code>-------------------------------------
* 첫 번째 숫자를 입력하세요: 1
* 사용할 연산자를 입력하세요: 2
***** 유효하지 않은 연산자입니다. *****
-------------------------------------
</code></pre><pre tabindex="0"><code>-------------------------------------
* 메뉴 번호를 입력하세요: 
***** 입력된 값이 없습니다. *****
-------------------------------------
</code></pre><pre tabindex="0"><code>-------------------------------------
* 첫 번째 숫자를 입력하세요: 99
* 사용할 연산자를 입력하세요: /
* 두 번째 숫자를 입력하세요: 0
***** 0으로 나눌 수 없습니다. *****
-------------------------------------
[ 99 / 0 = 정의되지 않음 ]
-------------------------------------
</code></pre><pre tabindex="0"><code>-------------------------------------
[1] [ 1 + 1 = 2 ]
[2] [ 2 + 2 = 4 ]
[3] [ 3 + 3 = 6 ]
[4] [ 4 + 4 = 8 ]
[5] [ 5 + 5 = 10 ]
[6] [ 99 / 0 = 정의되지 않음 ]
[7] [ 1 - 5 = -4 ]
[8] [ -9 * 40 = -360 ]
-------------------------------------
* 삭제할 기록의 번호를 입력하세요.
[취소: enter][전체: all 입력] 9
***** 유효하지 않은 숫자입니다. *****
-------------------------------------
</code></pre><pre tabindex="0"><code>-------------------------------------
[1] 연산하기
[2] 연산 기록 조회하기
[3] 연산 기록 삭제하기
[4] 연산 결과 검색하기
[5] 종료하기
-------------------------------------
* 메뉴 번호를 입력하세요: 4
-------------------------------------
[1] 보다 큰 값 검색하기
[2] 보다 작은 값 검색하기
[3] 일치하는 값 검색하기
-------------------------------------
* 메뉴 번호를 입력하세요. [취소: enter] 4
***** 유효하지 않은 숫자입니다. *****
-------------------------------------
</code></pre>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/camp/task-calculator-02/">
    <span class="title">« Prev</span>
    <br>
    <span>[내일배움캠프] 계산기 Lv 2</span>
  </a>
  <a class="next" href="http://localhost:1313/camp/day-12/">
    <span class="title">Next »</span>
    <br>
    <span>[내일배움캠프] 계산기 Lv 3 회고</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">withong</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = '✓';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
